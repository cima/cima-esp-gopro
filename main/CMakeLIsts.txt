set(srcs
    "LightHubMain.cpp"
    "LightGroupService.h" "LightGroupService.cpp"
    "LightSettings.h" "LightSettings.cpp"
    "Agent.h" "Agent.cpp"

    "system/Log.h" "system/Log.cpp"
    
    "system/ButtonController.h" "system/ButtonController.cpp"
    "system/PWMDriver.h" "system/PWMDriver.cpp"
    
    "system/ManagerNotInitializedException.h"
    "system/ExecutionLimiter.h" "system/ExecutionLimiter.cpp"

    "system/network/NetworkManager.h" "system/network/NetworkManager.cpp"
    "system/network/WifiManager.h" "system/network/WifiManager.cpp"
    "system/network/WifiCredentials.h" "system/network/WifiCredentials.cpp"

    "iot/CertSource.cpp" "iot/CertSource.h"
    "iot/AzureConfig.cpp" "iot/AzureConfig.h"
    # "iot/IotHubManager.cpp" "iot/IotHubManager.h"
    # "iot/DeviceProvisioningClient.cpp" "iot/DeviceProvisioningClient.h"
)


idf_component_register(SRCS "${srcs}"
                    #INCLUDE_DIRS ${COMPONENT_INCLUDE_DIRS}
                    REQUIRES freertos spiffs nvs_flash json mbedtls esp_eth driver lwip coreMQTT azure-sdk-for-c azure-iot-middleware-freertos
) 

enable_language(CXX)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS ON)

component_compile_definitions(CORE_DEBUG_LEVEL=4)

# Boost
if(Boost_FOUND)
    include_directories(${Boost_INCLUDE_DIRS})
endif()

# Azure SDK C specialities
add_definitions(-DSET_TRUSTED_CERT_IN_SAMPLES)
component_compile_definitions(SET_TRUSTED_CERT_IN_SAMPLES)

spiffs_create_partition_image(storage ../filesystem FLASH_IN_PROJECT)

#set(COMPONENT_REQUIRES spiffs nvs_flash json mbedtls port esp_eth driver lwip)
#set(COMPONENT_PRIV_REQUIRES )

#set(COMPONENT_SRCS "${srcs}")
#set(COMPONENT_ADD_INCLUDEDIRS "")
